(this["webpackJsonprefactored-spoon"]=this["webpackJsonprefactored-spoon"]||[]).push([[0],{123:function(e,t,n){e.exports=n(200)},128:function(e,t,n){},129:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(24),i=n.n(l),u=(n(128),n(9)),o=(n(129),n(11)),c=n.n(o),s=n(20),d=n(10),m=n(116),f=n.n(m),v=(n(131),n(59)),p=n(49),E=n(15);function h(e){var t=Object(E.f)();return r.a.createElement(v.a,{bg:"light",expand:"lg"},r.a.createElement(v.a.Brand,null,"Refactored Spoon"),r.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(p.a.Link,{href:"/refactored-spoon/days"},"Days"),r.a.createElement(p.a.Link,{href:"/refactored-spoon/foodsearch"},"Food Search"))),r.a.createElement(d.a,{variant:"secondary",onClick:function(){localStorage.removeItem("currentUser"),e.setAuthenticated(!1),t.push("/")}},"Logout"))}var b=n(98),y=n(58),g=n(28),O=n(40),j=n(111),x=n(27),I=n(69),S={ENERGY:1008,CALCIUM:1087,IRON:1089,VITAMIN_A:1104,VITAMIN_C:1162,PROTEIN:1003,FAT:1004,CARBOHYDRATE:1005,SUGAR:2e3,FIBER:1079,POTASSIUM:1092,SODIUM:1093,CHOLESTEROL:1253};function N(e){var t,n;return r.a.createElement(x.a,{key:e.searchResult.fdcId,border:"primary",style:{width:"30%",margin:"10px"}},r.a.createElement(x.a.Header,null,e.searchResult.description),r.a.createElement(x.a.Body,null,"FdcId: ",e.searchResult.fdcId,r.a.createElement("br",null),e.searchResult.brandOwner&&r.a.createElement("span",null,"Brand: ",e.searchResult.brandOwner,r.a.createElement("br",null)),e.searchResult.ingredients&&r.a.createElement("span",null,"Ingredients: ",e.searchResult.ingredients,r.a.createElement("br",null)),e.searchResult.foodNutrients&&r.a.createElement(I.a,{style:{marginTop:"5px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nutrient"),r.a.createElement("th",null,"Amount (per 100 grams)"))),r.a.createElement("tbody",null,e.searchResult.foodNutrients.filter((function(e){return[S.ENERGY,S.PROTEIN,S.CARBOHYDRATE,S.FAT].includes(e.nutrientId)})).map((function(e){return r.a.createElement("tr",{key:e.nutrientId},r.a.createElement("td",null,e.nutrientName),r.a.createElement("td",null,e.value," ",e.unitName))})))),e.showSelect&&!(null===(t=e.fdcIds)||void 0===t?void 0:t.includes(e.searchResult.fdcId))&&r.a.createElement(d.a,{onClick:function(){return e.selectFood()}},"Select food"),e.showSelect&&(null===(n=e.fdcIds)||void 0===n?void 0:n.includes(e.searchResult.fdcId))&&r.a.createElement("span",{style:{color:"green"}},"Food selected")))}function C(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)([]),m=Object(u.a)(o,2),f=m[0],v=m[1],p=Object(a.useState)(!1),E=Object(u.a)(p,2),h=E[0],b=E[1],y=Object(a.useState)(0),x=Object(u.a)(y,2),I=x[0],S=x[1],C=Object(a.useState)(1),k=Object(u.a)(C,2),w=k[0],A=k[1],T=Object(a.useState)(""),R=Object(u.a)(T,2),D=R[0],F=R[1],M=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b(!0),v([]),e.next=5,_(l);case 5:b(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(w>I)){e.next=4;break}return F("error! page "+w+" does not exist."),e.abrupt("return");case 4:return F(""),b(!0),v([]),e.next=9,_(l,9,w);case 9:b(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r,l,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:9,a=i.length>2&&void 0!==i[2]?i[2]:1,e.next=4,P(t,n,a);case 4:if(r=e.sent,0!==(l=(null===r||void 0===r?void 0:r.foods)?r.foods:[]).length){e.next=9;break}return v([]),e.abrupt("return");case 9:S(r.totalPages),A(r.currentPage),v(l);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(s.a)(c.a.mark((function e(t,n,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(z+"/food/search",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({generalSearchInput:t,pageSize:n,pageNumber:a>=0?a:1,requireAllWords:!0})});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement("span",null,r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",margin:"10px"}},r.a.createElement(g.a,{inline:!0,onSubmit:M},r.a.createElement(O.a,{type:"text",placeholder:"Search for food",className:"mr-sm-2",value:l,onChange:function(e){i(e.target.value)}}),r.a.createElement(d.a,{type:"submit",style:{margin:"5px"}},"Search"),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return v([])},style:{margin:"5px"}},"Clear search"))),r.a.createElement("div",null,h&&r.a.createElement(j.a,{animation:"border"}),f&&f.length>0&&r.a.createElement("span",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("span",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"}},f.map((function(t){return r.a.createElement(N,{key:t.fdcId,showSelect:e.showSelect,selectFood:function(){return e.selectFood(t)},fdcIds:e.fdcIds,searchResult:t})}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"}},r.a.createElement(g.a,{inline:!0,onSubmit:U},"Page",r.a.createElement(O.a,{type:"number",style:{margin:"5px",width:"80px"},value:w,onChange:function(e){A(parseInt(e.target.value))}}),"of ",I,r.a.createElement(d.a,{type:"submit",style:{margin:"5px"}},"Go")),r.a.createElement("div",{style:{color:"red"}},D))))))}function k(e){return e&&!(0===Object.keys(e).length&&e.constructor===Object)}function w(e){var t,n,a,l,i,u,o,c,s,d,m,f,v,p=function(e){return Math.round(100*e)/100};return r.a.createElement("span",{style:{display:"block",overflowY:"scroll",overflowX:"hidden",maxHeight:e.height?e.height:"300px",border:"1px solid lightGrey",maxWidth:"450px",margin:"0 auto"}},r.a.createElement(I.a,null,r.a.createElement("thead",{style:{display:"block",marginLeft:"27%",position:"sticky",top:"0",backgroundColor:"white"}},r.a.createElement("tr",null,r.a.createElement("th",{style:{position:"sticky",top:"0"}},"Nutrient"),r.a.createElement("th",{style:{position:"sticky",top:"0"}},"Amount"))),r.a.createElement("tbody",{style:{marginLeft:"25%",float:"left"}},!!(null===(t=e.nutrition.calories)||void 0===t?void 0:t.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Calories"),r.a.createElement("td",null,p(e.nutrition.calories.value)," ",e.nutrition.calories.unitName)),!!(null===(n=e.nutrition.protein)||void 0===n?void 0:n.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Protein"),r.a.createElement("td",null,p(e.nutrition.protein.value)," ",e.nutrition.protein.unitName)),!!(null===(a=e.nutrition.carbs)||void 0===a?void 0:a.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Carbs"),r.a.createElement("td",null,p(e.nutrition.carbs.value)," ",e.nutrition.carbs.unitName)),!!(null===(l=e.nutrition.fat)||void 0===l?void 0:l.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Fat"),r.a.createElement("td",null,p(e.nutrition.fat.value)," ",e.nutrition.fat.unitName)),!!(null===(i=e.nutrition.sugar)||void 0===i?void 0:i.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Sugar"),r.a.createElement("td",null,p(e.nutrition.sugar.value)," ",e.nutrition.sugar.unitName)),!!(null===(u=e.nutrition.fiber)||void 0===u?void 0:u.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Fiber"),r.a.createElement("td",null,p(e.nutrition.fiber.value)," ",e.nutrition.fiber.unitName)),!!(null===(o=e.nutrition.sodium)||void 0===o?void 0:o.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Sodium"),r.a.createElement("td",null,p(e.nutrition.sodium.value)," ",e.nutrition.sodium.unitName)),!!(null===(c=e.nutrition.calcium)||void 0===c?void 0:c.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Calcium"),r.a.createElement("td",null,p(e.nutrition.calcium.value)," ",e.nutrition.calcium.unitName)),!!(null===(s=e.nutrition.iron)||void 0===s?void 0:s.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Iron"),r.a.createElement("td",null,p(e.nutrition.iron.value)," ",e.nutrition.iron.unitName)),!!(null===(d=e.nutrition.cholesterol)||void 0===d?void 0:d.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Cholesterol"),r.a.createElement("td",null,p(e.nutrition.cholesterol.value)," ",e.nutrition.cholesterol.unitName)),!!(null===(m=e.nutrition.potassium)||void 0===m?void 0:m.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Potassium"),r.a.createElement("td",null,p(e.nutrition.potassium.value)," ",e.nutrition.potassium.unitName)),!!(null===(f=e.nutrition.vitaminA)||void 0===f?void 0:f.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Vitamin A"),r.a.createElement("td",null,p(e.nutrition.vitaminA.value)," ",e.nutrition.vitaminA.unitName)),!!(null===(v=e.nutrition.vitaminC)||void 0===v?void 0:v.value)&&r.a.createElement("tr",null,r.a.createElement("td",null,"Vitamin C"),r.a.createElement("td",null,p(e.nutrition.vitaminC.value)," ",e.nutrition.vitaminC.unitName)))))}function A(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),l=n[0],i=n[1];return r.a.createElement(x.a,{style:{width:"30%",margin:"10px"},className:"mb-2"},r.a.createElement(x.a.Header,null,e.food.fdcId),e.food.fdcId&&r.a.createElement("span",{style:{margin:"5px"}},"FDC ID: ",e.food.fdcId,r.a.createElement("br",null)),e.food.name&&r.a.createElement("span",{style:{margin:"5px"}},"Name: ",e.food.name,r.a.createElement("br",null)),e.food.description&&r.a.createElement("span",{style:{margin:"5px"}},"Description: ",e.food.description,r.a.createElement("br",null)),r.a.createElement("span",{style:{margin:"5px"}},"Calories: ",e.food.nutrition.calories.value," kcal",r.a.createElement("br",null)),!l&&r.a.createElement("span",null,r.a.createElement(d.a,{variant:"secondary",onClick:function(){return i(!0)}},"See nutrition"),r.a.createElement("br",null)),l&&r.a.createElement("span",null,"Food nutrition",r.a.createElement(w,{nutrition:e.food.nutrition}),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return i(!1)}},"Hide nutrition"),r.a.createElement("br",null)),r.a.createElement("span",null,"Serving size:",r.a.createElement(O.a,{type:"number",placeholder:100,style:{width:"80px",display:"inline-block",margin:"5px"},value:e.food.serving,onChange:function(t){return e.updateServingSize(t.target.value)}}),"g"),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"danger",onClick:function(){return e.removeFood(e.food._id?e.food._id:e.food.fdcId)}},"Remove"))}var T=[{value:"breakfast",label:"Breakfast"},{value:"lunch",label:"Lunch"},{value:"dinner",label:"Dinner"}];function R(e){var t,n,l,i=Object(a.useState)((null===(t=e.meal)||void 0===t?void 0:t.foods)?e.meal.foods:[]),o=Object(u.a)(i,2),c=o[0],s=o[1],m=Object(a.useState)((null===(n=e.meal)||void 0===n?void 0:n.name)?e.meal.name:""),f=Object(u.a)(m,2),v=f[0],p=f[1],E=Object(a.useState)((null===(l=e.meal)||void 0===l?void 0:l.nutrition)?e.meal.nutrition:{}),h=Object(u.a)(E,2),g=h[0],O=h[1],j=Object(a.useState)([]),x=Object(u.a)(j,2),I=x[0],N=x[1],R=function(e,t){var n=c.map((function(n){return(e._id?n._id===e._id:n.fdcId===e.fdcId)?(e.serving=t?parseInt(t):0,Object.keys(e.nutrition).forEach((function(t){var a;(null===(a=n.usdaNutrition[t])||void 0===a?void 0:a.value)&&(e.nutrition[t].value=D(n.usdaNutrition[t].value,e.serving))})),e):n}));s(n),function(){var e=g;Object.keys(e).forEach((function(t){e[t]&&(e[t].value=0)})),c.forEach((function(t){Object.keys(e).forEach((function(n){e[n]&&t.nutrition[n]&&(e[n].value+=t.nutrition[n].value)}))})),O(e)}()},D=function(e,t){return Math.round(e*t)/100},F=function(e){return{nutrientId:e.nutrientId,nutrientName:e.nutrientName,unitName:e.unitName,value:e.value}},M=function(e){var t=c.filter((function(t){return t.fdcId===e}))[0];s(c.filter((function(t){return t.fdcId!==e}))),N(I.filter((function(t){return t!==e})));var n=_(t,-1);O(n)},U=function(e){var t=c.filter((function(t){return t._id===e}))[0];s(c.filter((function(t){return t._id!==e})));var n=_(t,-1);O(n)},_=function(e,t){var n=g;if(!k(g)){var a={};return Object.keys(e.nutrition).forEach((function(t){e.nutrition[t]&&(a[t]={nutrientId:e.nutrition[t].nutrientId,nutrientName:e.nutrition[t].nutrientName,unitName:e.nutrition[t].unitName,value:e.nutrition[t].value})})),a}return Object.keys(n).forEach((function(a){n[a]&&e.nutrition[a]&&(n[a].value=P(n[a].value,e.nutrition[a].value,t))})),n},P=function(e,t,n){return(e||0)+n*(t||0)};return r.a.createElement("div",{style:{margin:"50px"}},r.a.createElement("div",null,r.a.createElement("div",{style:{borderStyle:"solid",borderWidth:"1px",padding:"20px"}},r.a.createElement(y.a,{onSelect:p,value:v},r.a.createElement(y.a.Toggle,{style:{backgroundColor:"white",color:"black"}},v||"Meal"),r.a.createElement(y.a.Menu,null,T.map((function(e){return r.a.createElement(y.a.Item,{key:e.label,eventKey:e.label},e.label)})))),(null===c||void 0===c?void 0:c.length)>0&&k(g)&&r.a.createElement("div",null,"Nutrition summary",r.a.createElement(w,{nutrition:g})),r.a.createElement("div",{style:{marginTop:"20px"}},"Foods"),r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},c.map((function(t){return r.a.createElement(A,{key:t._id?t._id:t.fdcId,food:t,updateServingSize:function(e){return R(t,e)},removeFood:e.meal?U:M})}))),r.a.createElement(C,{selectFood:function(e){var t,n,a,r,l,i,u,o,c,d,m,f,v,p=null===(t=e.foodNutrients)||void 0===t?void 0:t.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.ENERGY}))[0],E=null===(n=e.foodNutrients)||void 0===n?void 0:n.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.PROTEIN}))[0],h=null===(a=e.foodNutrients)||void 0===a?void 0:a.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.CARBOHYDRATE}))[0],y=null===(r=e.foodNutrients)||void 0===r?void 0:r.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.FAT}))[0],g=null===(l=e.foodNutrients)||void 0===l?void 0:l.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.SUGAR}))[0],j=null===(i=e.foodNutrients)||void 0===i?void 0:i.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.FIBER}))[0],x=null===(u=e.foodNutrients)||void 0===u?void 0:u.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.SODIUM}))[0],I=null===(o=e.foodNutrients)||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.CALCIUM}))[0],C=null===(c=e.foodNutrients)||void 0===c?void 0:c.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.IRON}))[0],k=null===(d=e.foodNutrients)||void 0===d?void 0:d.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.CHOLESTEROL}))[0],w=null===(m=e.foodNutrients)||void 0===m?void 0:m.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.POTASSIUM}))[0],A=null===(f=e.foodNutrients)||void 0===f?void 0:f.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.VITAMIN_A}))[0],T=null===(v=e.foodNutrients)||void 0===v?void 0:v.filter((function(e){return(null===e||void 0===e?void 0:e.nutrientId)===S.VITAMIN_C}))[0],R={description:e.description,brand:e.brandOwner,ingredients:e.ingredients,fdcId:e.fdcId,serving:100,nutrition:{calories:p?F(p):null,protein:E?F(E):null,carbs:h?F(h):null,fat:y?F(y):null,sugar:g?F(g):null,fiber:j?F(j):null,sodium:x?F(x):null,calcium:I?F(I):null,iron:C?F(C):null,cholesterol:k?F(k):null,potassium:w?F(w):null,vitaminA:A?F(A):null,vitaminC:T?F(T):null},usdaNutrition:{calories:p?F(p):null,protein:E?F(E):null,carbs:h?F(h):null,fat:y?F(y):null,sugar:g?F(g):null,fiber:j?F(j):null,sodium:x?F(x):null,calcium:I?F(I):null,iron:C?F(C):null,cholesterol:k?F(k):null,potassium:w?F(w):null,vitaminA:A?F(A):null,vitaminC:T?F(T):null}};s((function(e){return[].concat(Object(b.a)(e),[R])})),N((function(t){return[].concat(Object(b.a)(t),[e.fdcId])}));var D=_(R,1);O(D)},showSelect:!0,fdcIds:I}),r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(d.a,{variant:"secondary",type:"button",onClick:e.cancel,style:{marginRight:"5px"}},"Cancel"),r.a.createElement(d.a,{variant:"primary",type:"submit",onClick:function(t){var n;t.preventDefault();var a=c.map((function(e){return e.name=e.name?e.name:e.description,e})),r={_id:null===(n=e.meal)||void 0===n?void 0:n._id,name:v,foods:a,nutrition:g};e.submit(r)}},!e.meal&&"Add Meal",e.meal&&"Update Meal")))))}var D=n(92),F=n(94);function M(e){var t,n,l=Object(a.useState)(!1),i=Object(u.a)(l,2),o=i[0],c=i[1];return r.a.createElement("span",null,e.food.name,r.a.createElement("br",null),r.a.createElement("span",null,"serving: ",e.food.serving,r.a.createElement("br",null),"calories: ",null===(t=e.food.nutrition)||void 0===t||null===(n=t.calories)||void 0===n?void 0:n.value," kcal",r.a.createElement("br",null),!o&&r.a.createElement("span",null,r.a.createElement(d.a,{variant:"secondary",onClick:function(){return c(!0)},style:{marginTop:"10px",marginBottom:"20px"}},"See nutrition"),r.a.createElement("br",null)),o&&k(e.food.nutrition)&&r.a.createElement("span",null,"Food nutrition",r.a.createElement(w,{nutrition:e.food.nutrition,height:"180px"}),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return c(!1)},style:{marginTop:"10px",marginBottom:"20px"}},"Hide nutrition"))))}function U(e){var t,n,a,l;return r.a.createElement(x.a,{style:{width:"24rem",margin:"0 auto"},className:"mb-2"},r.a.createElement(x.a.Header,null,r.a.createElement("span",null,e.meal.name),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"link",size:"sm",onClick:function(){return e.updateMeal()}},r.a.createElement(D.a,{icon:F.a,style:{color:"black"}})),r.a.createElement(d.a,{variant:"link",size:"sm",onClick:function(){return e.deleteMeal(e.meal._id)}},r.a.createElement(D.a,{icon:F.b,style:{color:"black"}}))),r.a.createElement(x.a.Body,null,null===(t=e.meal)||void 0===t||null===(n=t.foods)||void 0===n?void 0:n.map((function(e,t){return r.a.createElement("span",{key:t},r.a.createElement(M,{food:e}))}))),!!(null===(a=e.meal)||void 0===a?void 0:a.foods)&&k(null===(l=e.meal)||void 0===l?void 0:l.nutrition)&&r.a.createElement("div",null,"Meal nutrition",r.a.createElement(w,{nutrition:e.meal.nutrition})))}function _(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)(""),c=Object(u.a)(o,2),s=c[0],m=c[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(g.a,{onSubmit:function(t){t.preventDefault(),e.handleSubmit(l,s)}},r.a.createElement(g.a.Group,{controlId:"formBasicEmail"},r.a.createElement(g.a.Label,null,"Email address"),r.a.createElement(g.a.Control,{type:"email",placeholder:"Email",value:l,onChange:function(e){i(e.target.value)}})),r.a.createElement(g.a.Group,{controlId:"formBasicPassword"},r.a.createElement(g.a.Label,null,"Password"),r.a.createElement(g.a.Control,{type:"password",placeholder:"Password",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement(d.a,{variant:"primary",type:"submit"},"Submit"))))}var P=n(121),B=n(95);function L(){return localStorage.getItem("currentUser")}function H(e){var t=Object(E.f)(),n=Object(a.useState)("login"),l=Object(u.a)(n,2),i=l[0],o=l[1],d=Object(a.useState)(""),m=Object(u.a)(d,2),f=m[0],v=m[1],p=function(){var n=Object(s.a)(c.a.mark((function n(a,r,l){var i,u;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(z+"/"+l,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:r})});case 2:return i=n.sent,n.next=5,i.text();case 5:u=n.sent,"login"===l&&302===i.status||"signup"===l&&201===i.status?(localStorage.setItem("currentUser",JSON.stringify(u)),e.setAuthenticated(!0),t.push("/days")):v("error with "+l+"\n"+u);case 7:case"end":return n.stop()}}),n)})));return function(e,t,a){return n.apply(this,arguments)}}();return r.a.createElement("div",{style:{width:"50%",height:"auto"}},r.a.createElement(P.a,{id:"signin-tabs",activeKey:i,onSelect:function(e){o(e),v("")}},r.a.createElement(B.a,{eventKey:"login",title:"Login"},r.a.createElement(_,{handleSubmit:function(e,t){p(e,t,"login")}})),r.a.createElement(B.a,{eventKey:"signup",title:"Sign Up"},r.a.createElement(_,{handleSubmit:function(e,t){p(e,t,"signup")}}))),f&&r.a.createElement("div",{style:{color:"red"}},"sign in unsuccessful :("))}function Y(e){var t=Object(a.useState)(),n=Object(u.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)(new Date),m=Object(u.a)(o,2),v=m[0],p=m[1],E=Object(a.useState)(!1),b=Object(u.a)(E,2),y=b[0],g=b[1],O=Object(a.useState)(""),j=Object(u.a)(O,2),x=j[0],I=j[1];Object(a.useEffect)((function(){S(v)}),[]);var S=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"?userId="+L(),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:if("000000000000000000000000"!==(r=e.sent)._id){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.getFullYear()+"-"+(v.getMonth()+1)+"-"+v.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"/meals?userId="+L(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:S(v),g(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.getFullYear()+"-"+(v.getMonth()+1)+"-"+v.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"/meals/"+t._id+"?userId="+L(),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:S(v),I("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.getFullYear()+"-"+(v.getMonth()+1)+"-"+v.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"/meals/"+t+"?userId="+L(),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:S(v);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(h,{setAuthenticated:e.setAuthenticated}),r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement(f.a,{selected:v,onChange:function(e){p(e),S(e),g(!1)}})),y&&r.a.createElement(R,{submit:C,cancel:function(){g(!1)}}),x&&r.a.createElement(R,{submit:A,cancel:function(){return I("")},meal:x}),!y&&!x&&r.a.createElement(d.a,{onClick:function(){g(!0)},style:{margin:"10px"}},"Add meal"),!y&&!x&&l&&r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},l.meals&&l.meals.map((function(e,t){return r.a.createElement(U,{key:t,meal:e,updateMeal:function(){return function(e){I(x?"":e)}(e)},deleteMeal:T})}))),r.a.createElement("div",null,(null===l||void 0===l?void 0:l.meals)&&k(l.nutrition)&&r.a.createElement("span",null,"Daily nutrition summary",r.a.createElement(w,{nutrition:l.nutrition})))),!(null===l||void 0===l?void 0:l.meals)&&r.a.createElement("div",null,"no data for this date"))}var G=n(61);n(199);function W(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),l=n[0],i=n[1];return r.a.createElement("div",null,r.a.createElement(h,{setAuthenticated:e.setAuthenticated}),l&&r.a.createElement("span",null,"selected food fdc ID: ",l),r.a.createElement(C,{selectFood:function(e){i(e.FdcId)}}))}function J(e){return r.a.createElement("div",{style:{margin:"3%"}},r.a.createElement("h3",null,"Refactored Spoon"),r.a.createElement("div",null,"an app to help you track what you eat and provide nutritional insights"),r.a.createElement("span",{style:{display:"flex",justifyContent:"center",margin:"5%"}},r.a.createElement(H,{setAuthenticated:e.setAuthenticated})))}var z="https://shielded-earth-02834.herokuapp.com";var V=function(){var e=Object(a.useState)(L()),t=Object(u.a)(e,2),n=t[0],l=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(G.a,{basename:"/refactored-spoon"},r.a.createElement(E.b,{exact:!0,path:"/",render:function(){return r.a.createElement(J,{setAuthenticated:l})}}),!n&&r.a.createElement("span",null,r.a.createElement(E.a,{to:"/"})),n&&r.a.createElement("span",null,r.a.createElement(E.b,{path:"/days",render:function(){return r.a.createElement(Y,{setAuthenticated:l})}}),r.a.createElement(E.b,{path:"/foodsearch",render:function(){return r.a.createElement(W,{setAuthenticated:l})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.dd82153c.chunk.js.map