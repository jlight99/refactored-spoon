(this["webpackJsonprefactored-spoon"]=this["webpackJsonprefactored-spoon"]||[]).push([[0],{123:function(e,t,n){e.exports=n(200)},128:function(e,t,n){},129:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),l=n.n(i),o=(n(128),n(9)),u=(n(129),n(15)),c=n.n(u),s=n(22),d=n(10),m=n(116),f=n.n(m),p=(n(131),n(59)),v=n(49),E=n(14);function b(e){var t=Object(E.f)();return r.a.createElement(p.a,{bg:"light",expand:"lg"},r.a.createElement(p.a.Brand,null,"Refactored Spoon"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(v.a,{className:"mr-auto"},r.a.createElement(v.a.Link,{href:"/refactored-spoon/days"},"Days"),r.a.createElement(v.a.Link,{href:"/refactored-spoon/foodsearch"},"Food Search"))),r.a.createElement(d.a,{variant:"secondary",onClick:function(){localStorage.removeItem("currentUser"),e.setAuthenticated(!1),t.push("/")}},"Logout"))}var h=n(98),g=n(58),y=n(28),O=n(40),j=n(23),S=n(69),x=n(111),C={ENERGY:1008,CALCIUM:1087,IRON:1089,VITAMIN_A:1104,VITAMIN_C:1162,PROTEIN:1003,FAT:1004,CARBOHYDRATE:1005,SUGAR:2e3,FIBER:1079,POTASSIUM:1092,SODIUM:1093,CHOLESTEROL:1253};function I(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],l=n[1],u=Object(a.useState)([]),m=Object(o.a)(u,2),f=m[0],p=m[1],v=Object(a.useState)(!1),E=Object(o.a)(v,2),b=E[0],h=E[1],g=Object(a.useState)(0),I=Object(o.a)(g,2),A=I[0],N=I[1],k=Object(a.useState)(1),w=Object(o.a)(k,2),T=w[0],M=w[1],D=Object(a.useState)(""),F=Object(o.a)(D,2),R=F[0],P=F[1],U=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(!0),p([]),e.next=5,L(i);case 5:h(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(T>A)){e.next=4;break}return P("error! page "+T+" does not exist."),e.abrupt("return");case 4:return P(""),h(!0),p([]),e.next=9,L(i,9,T);case 9:h(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r,i,l,o,u,s,d,m,f=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:9,a=f.length>2&&void 0!==f[2]?f[2]:1,e.next=4,fetch(W+"/food/search",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({generalSearchInput:t,pageSize:n,pageNumber:a>=0?a:1,requireAllWords:!0})});case 4:return r=e.sent,i=[],e.next=8,r.json();case 8:if(l=e.sent,o=(null===l||void 0===l?void 0:l.foods)?l.foods:[]){e.next=13;break}return p([]),e.abrupt("return");case 13:return o.forEach((function(e){i.push(e.fdcId)})),u=l.totalPages,N(u),M(l.currentPage),e.next=19,fetch(W+"/foods/detail",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({foods:i})});case 19:return s=e.sent,e.next=22,s.json();case 22:d=e.sent,m=[],o.forEach((function(e){var t={result:e,details:d.filter((function(t){return t.fdcId===e.fdcId}))[0]};m.push(t)})),p(m);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement("span",null,r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",margin:"10px"}},r.a.createElement(y.a,{inline:!0,onSubmit:U},r.a.createElement(O.a,{type:"text",placeholder:"Search for food",className:"mr-sm-2",value:i,onChange:function(e){l(e.target.value)}}),r.a.createElement(d.a,{type:"submit",style:{margin:"5px"}},"Search"),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return p([])},style:{margin:"5px"}},"Clear search"))),r.a.createElement("div",null,b&&r.a.createElement(x.a,{animation:"border"}),f&&f.length>0&&r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},f.map((function(t){var n,a,i;return r.a.createElement(j.a,{key:t.result.fdcId,border:"primary",style:{width:"30%",margin:"10px"}},r.a.createElement(j.a.Header,null,t.result.description),r.a.createElement(j.a.Body,null,"FdcId: ",t.result.fdcId,r.a.createElement("br",null),t.result.brandOwner&&r.a.createElement("span",null,"Brand: ",t.result.brandOwner,r.a.createElement("br",null)),t.result.ingredients&&r.a.createElement("span",null,"Ingredients: ",t.result.ingredients,r.a.createElement("br",null)),(null===t||void 0===t||null===(n=t.details)||void 0===n?void 0:n.foodNutrients)&&r.a.createElement(S.a,{style:{marginTop:"5px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nutrient"),r.a.createElement("th",null,"Amount (per 100 grams)"))),r.a.createElement("tbody",null,t.details.foodNutrients.filter((function(e){return[C.ENERGY,C.PROTEIN,C.CARBOHYDRATE,C.FAT].includes(e.nutrient.id)})).map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.nutrient.name),r.a.createElement("td",null,e.amount," ",e.nutrient.unitName))})))),e.showSelect&&!(null===(a=e.fdcIds)||void 0===a?void 0:a.includes(t.result.fdcId))&&r.a.createElement(d.a,{onClick:function(){return e.selectFood(t.result,t.details)}},"Select food"),e.showSelect&&(null===(i=e.fdcIds)||void 0===i?void 0:i.includes(t.result.fdcId))&&r.a.createElement("span",{style:{color:"green"}},"Food selected")))})),r.a.createElement("div",null,r.a.createElement(y.a,{inline:!0,onSubmit:_},"Page",r.a.createElement(O.a,{type:"number",style:{margin:"5px",width:"80px"},value:T,onChange:function(e){M(parseInt(e.target.value))}}),"of ",A,r.a.createElement(d.a,{type:"submit",style:{margin:"5px"}},"Go")),r.a.createElement("div",{style:{color:"red"}},R))))))}function A(e){return e&&!(0===Object.keys(e).length&&e.constructor===Object)}function N(e){var t=function(e){return Math.round(100*e)/100};return r.a.createElement("span",{style:{display:"block",overflowY:"scroll",overflowX:"hidden",maxHeight:e.height?e.height:"300px",border:"1px solid lightGrey",maxWidth:"450px",margin:"0 auto"}},r.a.createElement(S.a,null,r.a.createElement("thead",{style:{display:"block",marginLeft:"27%",position:"sticky",top:"0",backgroundColor:"white"}},r.a.createElement("tr",null,r.a.createElement("th",{style:{position:"sticky",top:"0"}},"Nutrient"),r.a.createElement("th",{style:{position:"sticky",top:"0"}},"Amount"))),r.a.createElement("tbody",{style:{marginLeft:"25%",float:"left"}},!!e.nutrition.calories&&r.a.createElement("tr",null,r.a.createElement("td",null,"Calories"),r.a.createElement("td",null,t(e.nutrition.calories))),!!e.nutrition.protein&&r.a.createElement("tr",null,r.a.createElement("td",null,"Protein"),r.a.createElement("td",null,t(e.nutrition.protein))),!!e.nutrition.carbs&&r.a.createElement("tr",null,r.a.createElement("td",null,"Carbs"),r.a.createElement("td",null,t(e.nutrition.carbs))),!!e.nutrition.fat&&r.a.createElement("tr",null,r.a.createElement("td",null,"Fat"),r.a.createElement("td",null,t(e.nutrition.fat))),!!e.nutrition.sugar&&r.a.createElement("tr",null,r.a.createElement("td",null,"Sugar"),r.a.createElement("td",null,t(e.nutrition.sugar))),!!e.nutrition.fiber&&r.a.createElement("tr",null,r.a.createElement("td",null,"Fiber"),r.a.createElement("td",null,t(e.nutrition.fiber))),!!e.nutrition.sodium&&r.a.createElement("tr",null,r.a.createElement("td",null,"Sodium"),r.a.createElement("td",null,t(e.nutrition.sodium))),!!e.nutrition.calcium&&r.a.createElement("tr",null,r.a.createElement("td",null,"Calcium"),r.a.createElement("td",null,t(e.nutrition.calcium))),!!e.nutrition.iron&&r.a.createElement("tr",null,r.a.createElement("td",null,"Iron"),r.a.createElement("td",null,t(e.nutrition.iron))),!!e.nutrition.cholesterol&&r.a.createElement("tr",null,r.a.createElement("td",null,"Cholesterol"),r.a.createElement("td",null,t(e.nutrition.cholesterol))),!!e.nutrition.potassium&&r.a.createElement("tr",null,r.a.createElement("td",null,"Potassium"),r.a.createElement("td",null,t(e.nutrition.potassium))),!!e.nutrition.vitaminA&&r.a.createElement("tr",null,r.a.createElement("td",null,"Vitamin A"),r.a.createElement("td",null,t(e.nutrition.vitaminA))),!!e.nutrition.vitaminC&&r.a.createElement("tr",null,r.a.createElement("td",null,"Vitamin C"),r.a.createElement("td",null,t(e.nutrition.vitaminC))))))}function k(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],l=n[1];return r.a.createElement(j.a,{style:{width:"30%",margin:"10px"},className:"mb-2"},r.a.createElement(j.a.Header,null,e.food.fdcId),e.food.fdcId&&r.a.createElement("span",{style:{margin:"5px"}},"FDC ID: ",e.food.fdcId,r.a.createElement("br",null)),e.food.name&&r.a.createElement("span",{style:{margin:"5px"}},"Name: ",e.food.name,r.a.createElement("br",null)),e.food.details&&r.a.createElement("span",{style:{margin:"5px"}},"Description: ",e.food.details.description,r.a.createElement("br",null)),r.a.createElement("span",{style:{margin:"5px"}},"Calories: ",e.food.nutrition.calories,r.a.createElement("br",null)),!i&&r.a.createElement("span",null,r.a.createElement(d.a,{variant:"secondary",onClick:function(){return l(!0)}},"See nutrition"),r.a.createElement("br",null)),i&&r.a.createElement("span",null,"Food nutrition",r.a.createElement(N,{nutrition:e.food.nutrition}),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return l(!1)}},"Hide nutrition"),r.a.createElement("br",null)),r.a.createElement("span",null,"Serving size:",r.a.createElement(O.a,{type:"number",placeholder:100,style:{width:"80px",display:"inline-block",margin:"5px"},value:e.food.serving,onChange:function(t){return e.updateServingSize(e.food,t.target.value)}}),"g"),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"danger",onClick:function(){return e.removeFood(e.food._id?e.food._id:e.food.fdcId)}},"Remove"))}var w=[{value:"breakfast",label:"Breakfast"},{value:"lunch",label:"Lunch"},{value:"dinner",label:"Dinner"}];function T(e){var t,n,i,l=Object(a.useState)((null===(t=e.meal)||void 0===t?void 0:t.foods)?e.meal.foods:[]),u=Object(o.a)(l,2),c=u[0],s=u[1],m=Object(a.useState)((null===(n=e.meal)||void 0===n?void 0:n.name)?e.meal.name:""),f=Object(o.a)(m,2),p=f[0],v=f[1],E=Object(a.useState)((null===(i=e.meal)||void 0===i?void 0:i.nutrition)?e.meal.nutrition:{}),b=Object(o.a)(E,2),y=b[0],O=b[1],j=Object(a.useState)([]),S=Object(o.a)(j,2),x=S[0],T=S[1],M=function(e,t){var n=c.map((function(n){return(e._id?n._id===e._id:n.fdcId===e.fdcId)?(e.serving=parseInt(t),e.nutrition={calories:F(n.usdaNutrition.calories,t),protein:D(n.usdaNutrition.protein,t),carbs:D(n.usdaNutrition.carbs,t),fat:D(n.usdaNutrition.fat,t),sugar:D(n.usdaNutrition.sugar,t),fiber:D(n.usdaNutrition.fiber,t),sodium:F(n.usdaNutrition.sodium,t),calcium:F(n.usdaNutrition.calcium,t),iron:D(n.usdaNutrition.iron,t),cholesterol:F(n.usdaNutrition.cholesterol,t),potassium:F(n.usdaNutrition.potassium,t),vitaminA:D(n.usdaNutrition.vitaminA,t),vitaminC:D(n.usdaNutrition.vitaminC,t)},e):n}));s(n),function(){var e={calories:0,protein:0,carbs:0,fat:0,sugar:0,fiber:0,sodium:0,calcium:0,iron:0,cholesterol:0,potassium:0,vitaminA:0,vitaminC:0};c.forEach((function(t){e.calories+=t.nutrition.calories,e.protein+=t.nutrition.protein,e.carbs+=t.nutrition.carbs,e.fat+=t.nutrition.fat,e.sugar+=t.nutrition.sugar,e.fiber+=t.nutrition.fiber,e.sodium+=t.nutrition.sodium,e.calcium+=t.nutrition.calcium,e.iron+=t.nutrition.iron,e.cholesterol+=t.nutrition.cholesterol,e.potassium+=t.nutrition.potassium,e.vitaminA+=t.nutrition.vitaminA,e.vitaminC+=t.nutrition.vitaminC})),O(e)}()},D=function(e,t){return Math.round(e*t)/100},F=function(e,t){return Math.round(e/100*t)},R=function(e){var t=c.filter((function(t){return t.fdcId===e}))[0];s(c.filter((function(t){return t.fdcId!==e}))),T(x.filter((function(t){return t!==e})));var n=U(t,-1);O(n)},P=function(e){var t=c.filter((function(t){return t._id===e}))[0];s(c.filter((function(t){return t._id!==e})));var n=U(t,-1);O(n)},U=function(e,t){return{calories:_(y.calories,e.nutrition.calories,t),protein:_(y.protein,e.nutrition.protein,t),carbs:_(y.carbs,e.nutrition.carbs,t),fat:_(y.fat,e.nutrition.fat,t),sugar:_(y.sugar,e.nutrition.sugar,t),fiber:_(y.fiber,e.nutrition.fiber,t),sodium:_(y.sodium,e.nutrition.sodium,t),calcium:_(y.calcium,e.nutrition.calcium,t),iron:_(y.iron,e.nutrition.iron,t),cholesterol:_(y.cholesterol,e.nutrition.cholesterol,t),potassium:_(y.potassium,e.nutrition.potassium,t),vitaminA:_(y.vitaminA,e.nutrition.vitaminA,t),vitaminC:_(y.vitaminC,e.nutrition.vitaminC,t)}},_=function(e,t,n){return(e||0)+n*(t||0)};return r.a.createElement("div",{style:{margin:"50px"}},r.a.createElement("div",null,r.a.createElement("div",{style:{borderStyle:"solid",borderWidth:"1px",padding:"20px"}},r.a.createElement(g.a,{onSelect:v,value:p},r.a.createElement(g.a.Toggle,{style:{backgroundColor:"white",color:"black"}},p||"Meal"),r.a.createElement(g.a.Menu,null,w.map((function(e){return r.a.createElement(g.a.Item,{key:e.label,eventKey:e.label},e.label)})))),A(y)&&r.a.createElement("div",null,"Nutrition summary",r.a.createElement(N,{nutrition:y})),r.a.createElement("div",{style:{marginTop:"20px"}},"Foods"),r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},c.map((function(t){return r.a.createElement(k,{key:t._id?t._id:t.fdcId,food:t,updateServingSize:M,removeFood:e.meal?P:R})}))),r.a.createElement(I,{selectFood:function(e,t){var n,a,r,i,l,o,u,c,d,m,f,p,v,E,b,g,y,j,S,x,I,A,N,k,w,M,D=null===t||void 0===t||null===(n=t.foodNutrients)||void 0===n||null===(a=n.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.ENERGY}))[0])||void 0===a?void 0:a.amount,F=null===t||void 0===t||null===(r=t.foodNutrients)||void 0===r||null===(i=r.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.PROTEIN}))[0])||void 0===i?void 0:i.amount,R=null===t||void 0===t||null===(l=t.foodNutrients)||void 0===l||null===(o=l.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.CARBOHYDRATE}))[0])||void 0===o?void 0:o.amount,P=null===t||void 0===t||null===(u=t.foodNutrients)||void 0===u||null===(c=u.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.FAT}))[0])||void 0===c?void 0:c.amount,_=null===t||void 0===t||null===(d=t.foodNutrients)||void 0===d||null===(m=d.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.SUGAR}))[0])||void 0===m?void 0:m.amount,L=null===t||void 0===t||null===(f=t.foodNutrients)||void 0===f||null===(p=f.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.FIBER}))[0])||void 0===p?void 0:p.amount,B=null===t||void 0===t||null===(v=t.foodNutrients)||void 0===v||null===(E=v.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.SODIUM}))[0])||void 0===E?void 0:E.amount,H=null===t||void 0===t||null===(b=t.foodNutrients)||void 0===b||null===(g=b.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.CALCIUM}))[0])||void 0===g?void 0:g.amount,Y=null===t||void 0===t||null===(y=t.foodNutrients)||void 0===y||null===(j=y.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.IRON}))[0])||void 0===j?void 0:j.amount,G=null===t||void 0===t||null===(S=t.foodNutrients)||void 0===S||null===(x=S.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.CHOLESTEROL}))[0])||void 0===x?void 0:x.amount,J=null===t||void 0===t||null===(I=t.foodNutrients)||void 0===I||null===(A=I.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.POTASSIUM}))[0])||void 0===A?void 0:A.amount,W=null===t||void 0===t||null===(N=t.foodNutrients)||void 0===N||null===(k=N.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.VITAMIN_A}))[0])||void 0===k?void 0:k.amount,z=null===t||void 0===t||null===(w=t.foodNutrients)||void 0===w||null===(M=w.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.VITAMIN_C}))[0])||void 0===M?void 0:M.amount,V={brand:e.brandOwner,ingredients:e.ingredients,fdcId:e.fdcId,serving:100,nutrition:{calories:D||0,protein:F||0,carbs:R||0,fat:P||0,sugar:_||0,fiber:L||0,sodium:B||0,calcium:H||0,iron:Y||0,cholesterol:G||0,potassium:J||0,vitaminA:W||0,vitaminC:z||0},usdaNutrition:{calories:D||0,protein:F||0,carbs:R||0,fat:P||0,sugar:_||0,fiber:L||0,sodium:B||0,calcium:H||0,iron:Y||0,cholesterol:G||0,potassium:J||0,vitaminA:W||0,vitaminC:z||0},details:t};s((function(e){return[].concat(Object(h.a)(e),[V])})),T((function(t){return[].concat(Object(h.a)(t),[e.fdcId])}));var K=U(V,1);O(K)},showSelect:!0,fdcIds:x}),r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(d.a,{variant:"secondary",type:"button",onClick:e.cancel,style:{marginRight:"5px"}},"Cancel"),r.a.createElement(d.a,{variant:"primary",type:"submit",onClick:function(t){var n;t.preventDefault();var a=c.map((function(e){return e.name=e.name?e.name:e.details.description,e})),r={_id:null===(n=e.meal)||void 0===n?void 0:n._id,name:p,foods:a,nutrition:y};e.submit(r)}},!e.meal&&"Add Meal",e.meal&&"Update Meal")))))}var M=n(92),D=n(94);function F(e){var t,n,i=Object(a.useState)(!1),l=Object(o.a)(i,2),u=l[0],c=l[1];return r.a.createElement("span",null,e.food.name,r.a.createElement("br",null),r.a.createElement("span",null,e.food.group&&r.a.createElement("span",null,"group: ",e.food.group,r.a.createElement("br",null)),"serving: ",e.food.serving,r.a.createElement("br",null),"calories: ",null===(t=e.food)||void 0===t||null===(n=t.nutrition)||void 0===n?void 0:n.calories,r.a.createElement("br",null),!u&&r.a.createElement("span",null,r.a.createElement(d.a,{variant:"secondary",onClick:function(){return c(!0)}},"See nutrition"),r.a.createElement("br",null)),u&&A(e.food.nutrition)&&r.a.createElement("span",null,"Food nutrition",r.a.createElement(N,{nutrition:e.food.nutrition,height:"180px"}),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return c(!1)}},"Hide nutrition"),r.a.createElement("br",null))))}function R(e){var t,n,a;return r.a.createElement(j.a,{style:{width:"24rem",margin:"0 auto"},className:"mb-2"},r.a.createElement(j.a.Header,null,r.a.createElement("span",null,e.meal.name),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"link",size:"sm",onClick:function(){return e.updateMeal(e.meal)}},r.a.createElement(M.a,{icon:D.a,style:{color:"black"}})),r.a.createElement(d.a,{variant:"link",size:"sm",onClick:function(){return e.deleteMeal(e.meal._id)}},r.a.createElement(M.a,{icon:D.b,style:{color:"black"}}))),r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Text,null,null===(t=e.meal)||void 0===t||null===(n=t.foods)||void 0===n?void 0:n.map((function(e,t){return r.a.createElement("span",{key:t},r.a.createElement(F,{food:e}))})))),r.a.createElement("div",null,"Meal nutrition",A(null===(a=e.meal)||void 0===a?void 0:a.nutrition)&&r.a.createElement(N,{nutrition:e.meal.nutrition})))}function P(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],l=n[1],u=Object(a.useState)(""),c=Object(o.a)(u,2),s=c[0],m=c[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(y.a,{onSubmit:function(t){t.preventDefault(),e.handleSubmit(i,s)}},r.a.createElement(y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(y.a.Label,null,"Email address"),r.a.createElement(y.a.Control,{type:"email",placeholder:"Email",value:i,onChange:function(e){l(e.target.value)}})),r.a.createElement(y.a.Group,{controlId:"formBasicPassword"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{type:"password",placeholder:"Password",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement(d.a,{variant:"primary",type:"submit"},"Submit"))))}var U=n(121),_=n(95);function L(){return localStorage.getItem("currentUser")}function B(e){var t=Object(E.f)(),n=Object(a.useState)("login"),i=Object(o.a)(n,2),l=i[0],u=i[1],d=Object(a.useState)(""),m=Object(o.a)(d,2),f=m[0],p=m[1],v=function(){var n=Object(s.a)(c.a.mark((function n(a,r,i){var l,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(W+"/"+i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:r})});case 2:return l=n.sent,n.next=5,l.text();case 5:o=n.sent,"login"===i&&302===l.status||"signup"===i&&201===l.status?(localStorage.setItem("currentUser",JSON.stringify(o)),e.setAuthenticated(!0),t.push("/days")):p("error with "+i+"\n"+o);case 7:case"end":return n.stop()}}),n)})));return function(e,t,a){return n.apply(this,arguments)}}();return r.a.createElement("div",{style:{width:"50%",height:"auto"}},r.a.createElement(U.a,{id:"signin-tabs",activeKey:l,onSelect:function(e){u(e),p("")}},r.a.createElement(_.a,{eventKey:"login",title:"Login"},r.a.createElement(P,{handleSubmit:function(e,t){v(e,t,"login")}})),r.a.createElement(_.a,{eventKey:"signup",title:"Sign Up"},r.a.createElement(P,{handleSubmit:function(e,t){v(e,t,"signup")}}))),f&&r.a.createElement("div",{style:{color:"red"}},"sign in unsuccessful :("))}function H(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),i=n[0],l=n[1],u=Object(a.useState)(new Date),m=Object(o.a)(u,2),p=m[0],v=m[1],E=Object(a.useState)(!1),h=Object(o.a)(E,2),g=h[0],y=h[1],O=Object(a.useState)(""),j=Object(o.a)(O,2),S=j[0],x=j[1];Object(a.useEffect)((function(){C(p)}),[]);var C=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:n=e.sent,l(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getUTCDate(),e.next=3,fetch(W+"/days/"+n+"?user="+L(),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:if("000000000000000000000000"!==(r=e.sent)._id){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getUTCDate(),e.next=3,fetch(W+"/days/"+n+"/meals?user="+L(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:C(p),y(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getUTCDate(),e.next=3,fetch(W+"/days/"+n+"/meals/"+t._id+"?user="+L(),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:C(p),x("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getUTCDate(),e.next=3,fetch(W+"/days/"+n+"/meals/"+t+"?user="+L(),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:C(p);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){x(S?"":e)};return r.a.createElement("div",null,r.a.createElement(b,{setAuthenticated:e.setAuthenticated}),r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement(f.a,{selected:p,onChange:function(e){v(e),C(e),y(!1)}})),g&&r.a.createElement(T,{submit:k,cancel:function(){y(!1)}}),S&&r.a.createElement(T,{submit:w,cancel:function(){return x("")},meal:S}),!g&&!S&&r.a.createElement(d.a,{onClick:function(){y(!0)},style:{margin:"10px"}},"Add meal"),!g&&!S&&i&&r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},i.meals&&i.meals.map((function(e,t){return r.a.createElement(R,{key:t,meal:e,updateMeal:D,deleteMeal:M})}))),r.a.createElement("div",null,A(i.nutrition)&&r.a.createElement("span",null,"Daily nutrition summary",r.a.createElement(N,{nutrition:i.nutrition})))),!i&&r.a.createElement("div",null,"no data for this date"))}var Y=n(61);n(199);function G(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],l=n[1];return r.a.createElement("div",null,r.a.createElement(b,{setAuthenticated:e.setAuthenticated}),i&&r.a.createElement("span",null,"selected food fdc ID: ",i),r.a.createElement(I,{selectFood:function(e){l(e.FdcId)}}))}function J(e){return r.a.createElement("div",{style:{margin:"3%"}},r.a.createElement("h3",null,"Refactored Spoon"),r.a.createElement("div",null,"an app to help you track what you eat and provide nutritional insights"),r.a.createElement("span",{style:{display:"flex",justifyContent:"center",margin:"5%"}},r.a.createElement(B,{setAuthenticated:e.setAuthenticated})))}var W="https://shielded-earth-02834.herokuapp.com";var z=function(){var e=Object(a.useState)(L()),t=Object(o.a)(e,2),n=t[0],i=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(Y.a,{basename:"/refactored-spoon"},r.a.createElement(E.b,{exact:!0,path:"/",render:function(){return r.a.createElement(J,{setAuthenticated:i})}}),!n&&r.a.createElement("span",null,r.a.createElement(E.a,{to:"/"})),n&&r.a.createElement("span",null,r.a.createElement(E.b,{path:"/days",render:function(){return r.a.createElement(H,{setAuthenticated:i})}}),r.a.createElement(E.b,{path:"/foodsearch",render:function(){return r.a.createElement(G,{setAuthenticated:i})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.798d7e06.chunk.js.map