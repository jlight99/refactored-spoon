(this["webpackJsonprefactored-spoon"]=this["webpackJsonprefactored-spoon"]||[]).push([[0],{123:function(e,t,n){e.exports=n(200)},128:function(e,t,n){},129:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),l=n.n(i),o=(n(128),n(9)),u=(n(129),n(11)),c=n.n(u),s=n(20),d=n(10),m=n(116),f=n.n(m),p=(n(131),n(59)),v=n(49),E=n(15);function h(e){var t=Object(E.f)();return r.a.createElement(p.a,{bg:"light",expand:"lg"},r.a.createElement(p.a.Brand,null,"Refactored Spoon"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(v.a,{className:"mr-auto"},r.a.createElement(v.a.Link,{href:"/refactored-spoon/days"},"Days"),r.a.createElement(v.a.Link,{href:"/refactored-spoon/foodsearch"},"Food Search"))),r.a.createElement(d.a,{variant:"secondary",onClick:function(){localStorage.removeItem("currentUser"),e.setAuthenticated(!1),t.push("/")}},"Logout"))}var b=n(98),y=n(58),g=n(28),O=n(40),j=n(111),x=n(23),S=n(69),C={ENERGY:1008,CALCIUM:1087,IRON:1089,VITAMIN_A:1104,VITAMIN_C:1162,PROTEIN:1003,FAT:1004,CARBOHYDRATE:1005,SUGAR:2e3,FIBER:1079,POTASSIUM:1092,SODIUM:1093,CHOLESTEROL:1253};function w(e){var t,n,a,i;return r.a.createElement(x.a,{key:e.searchResult.result.fdcId,border:"primary",style:{width:"30%",margin:"10px"}},r.a.createElement(x.a.Header,null,e.searchResult.result.description),r.a.createElement(x.a.Body,null,"FdcId: ",e.searchResult.result.fdcId,r.a.createElement("br",null),e.searchResult.result.brandOwner&&r.a.createElement("span",null,"Brand: ",e.searchResult.result.brandOwner,r.a.createElement("br",null)),e.searchResult.result.ingredients&&r.a.createElement("span",null,"Ingredients: ",e.searchResult.result.ingredients,r.a.createElement("br",null)),(null===(t=e.searchResult)||void 0===t||null===(n=t.details)||void 0===n?void 0:n.foodNutrients)&&r.a.createElement(S.a,{style:{marginTop:"5px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nutrient"),r.a.createElement("th",null,"Amount (per 100 grams)"))),r.a.createElement("tbody",null,e.searchResult.details.foodNutrients.filter((function(e){return[C.ENERGY,C.PROTEIN,C.CARBOHYDRATE,C.FAT].includes(e.nutrient.id)})).map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.nutrient.name),r.a.createElement("td",null,e.amount," ",e.nutrient.unitName))})))),e.showSelect&&!(null===(a=e.fdcIds)||void 0===a?void 0:a.includes(e.searchResult.result.fdcId))&&r.a.createElement(d.a,{onClick:function(){return e.selectFood(e.searchResult.result,e.searchResult.details)}},"Select food"),e.showSelect&&(null===(i=e.fdcIds)||void 0===i?void 0:i.includes(e.searchResult.result.fdcId))&&r.a.createElement("span",{style:{color:"green"}},"Food selected")))}function I(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],l=n[1],u=Object(a.useState)([]),m=Object(o.a)(u,2),f=m[0],p=m[1],v=Object(a.useState)(!1),E=Object(o.a)(v,2),h=E[0],b=E[1],y=Object(a.useState)(0),x=Object(o.a)(y,2),S=x[0],C=x[1],I=Object(a.useState)(1),A=Object(o.a)(I,2),N=A[0],k=A[1],T=Object(a.useState)(""),R=Object(o.a)(T,2),D=R[0],M=R[1],F=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b(!0),p([]),e.next=5,U(i);case 5:b(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(N>S)){e.next=4;break}return M("error! page "+N+" does not exist."),e.abrupt("return");case 4:return M(""),b(!0),p([]),e.next=9,U(i,9,N);case 9:b(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r,i,l,o,u,s,d,m=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:9,a=m.length>2&&void 0!==m[2]?m[2]:1,e.next=4,_(t,n,a);case 4:if(r=e.sent,0!==(i=(null===r||void 0===r?void 0:r.foods)?r.foods:[]).length){e.next=9;break}return p([]),e.abrupt("return");case 9:return l=[],i.forEach((function(e){l.push(e.fdcId)})),C(r.totalPages),k(r.currentPage),e.next=15,L(l);case 15:for(o=e.sent,u=[],s=0;s<i.length;s++)d={result:i[s],details:o[s]},u.push(d);p(u);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(c.a.mark((function e(t,n,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(z+"/food/search",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({generalSearchInput:t,pageSize:n,pageNumber:a>=0?a:1,requireAllWords:!0})});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(z+"/foods/detail",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({foods:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement("span",null,r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",margin:"10px"}},r.a.createElement(g.a,{inline:!0,onSubmit:F},r.a.createElement(O.a,{type:"text",placeholder:"Search for food",className:"mr-sm-2",value:i,onChange:function(e){l(e.target.value)}}),r.a.createElement(d.a,{type:"submit",style:{margin:"5px"}},"Search"),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return p([])},style:{margin:"5px"}},"Clear search"))),r.a.createElement("div",null,h&&r.a.createElement(j.a,{animation:"border"}),f&&f.length>0&&r.a.createElement("span",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("span",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"}},f.map((function(t){return r.a.createElement(w,{showSelect:e.showSelect,selectFood:e.selectFood,fdcIds:e.fdcIds,searchResult:t})}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"}},r.a.createElement(g.a,{inline:!0,onSubmit:P},"Page",r.a.createElement(O.a,{type:"number",style:{margin:"5px",width:"80px"},value:N,onChange:function(e){k(parseInt(e.target.value))}}),"of ",S,r.a.createElement(d.a,{type:"submit",style:{margin:"5px"}},"Go")),r.a.createElement("div",{style:{color:"red"}},D))))))}function A(e){return e&&!(0===Object.keys(e).length&&e.constructor===Object)}function N(e){var t=function(e){return Math.round(100*e)/100};return r.a.createElement("span",{style:{display:"block",overflowY:"scroll",overflowX:"hidden",maxHeight:e.height?e.height:"300px",border:"1px solid lightGrey",maxWidth:"450px",margin:"0 auto"}},r.a.createElement(S.a,null,r.a.createElement("thead",{style:{display:"block",marginLeft:"27%",position:"sticky",top:"0",backgroundColor:"white"}},r.a.createElement("tr",null,r.a.createElement("th",{style:{position:"sticky",top:"0"}},"Nutrient"),r.a.createElement("th",{style:{position:"sticky",top:"0"}},"Amount"))),r.a.createElement("tbody",{style:{marginLeft:"25%",float:"left"}},!!e.nutrition.calories&&r.a.createElement("tr",null,r.a.createElement("td",null,"Calories"),r.a.createElement("td",null,t(e.nutrition.calories))),!!e.nutrition.protein&&r.a.createElement("tr",null,r.a.createElement("td",null,"Protein"),r.a.createElement("td",null,t(e.nutrition.protein))),!!e.nutrition.carbs&&r.a.createElement("tr",null,r.a.createElement("td",null,"Carbs"),r.a.createElement("td",null,t(e.nutrition.carbs))),!!e.nutrition.fat&&r.a.createElement("tr",null,r.a.createElement("td",null,"Fat"),r.a.createElement("td",null,t(e.nutrition.fat))),!!e.nutrition.sugar&&r.a.createElement("tr",null,r.a.createElement("td",null,"Sugar"),r.a.createElement("td",null,t(e.nutrition.sugar))),!!e.nutrition.fiber&&r.a.createElement("tr",null,r.a.createElement("td",null,"Fiber"),r.a.createElement("td",null,t(e.nutrition.fiber))),!!e.nutrition.sodium&&r.a.createElement("tr",null,r.a.createElement("td",null,"Sodium"),r.a.createElement("td",null,t(e.nutrition.sodium))),!!e.nutrition.calcium&&r.a.createElement("tr",null,r.a.createElement("td",null,"Calcium"),r.a.createElement("td",null,t(e.nutrition.calcium))),!!e.nutrition.iron&&r.a.createElement("tr",null,r.a.createElement("td",null,"Iron"),r.a.createElement("td",null,t(e.nutrition.iron))),!!e.nutrition.cholesterol&&r.a.createElement("tr",null,r.a.createElement("td",null,"Cholesterol"),r.a.createElement("td",null,t(e.nutrition.cholesterol))),!!e.nutrition.potassium&&r.a.createElement("tr",null,r.a.createElement("td",null,"Potassium"),r.a.createElement("td",null,t(e.nutrition.potassium))),!!e.nutrition.vitaminA&&r.a.createElement("tr",null,r.a.createElement("td",null,"Vitamin A"),r.a.createElement("td",null,t(e.nutrition.vitaminA))),!!e.nutrition.vitaminC&&r.a.createElement("tr",null,r.a.createElement("td",null,"Vitamin C"),r.a.createElement("td",null,t(e.nutrition.vitaminC))))))}function k(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],l=n[1];return r.a.createElement(x.a,{style:{width:"30%",margin:"10px"},className:"mb-2"},r.a.createElement(x.a.Header,null,e.food.fdcId),e.food.fdcId&&r.a.createElement("span",{style:{margin:"5px"}},"FDC ID: ",e.food.fdcId,r.a.createElement("br",null)),e.food.name&&r.a.createElement("span",{style:{margin:"5px"}},"Name: ",e.food.name,r.a.createElement("br",null)),e.food.details&&r.a.createElement("span",{style:{margin:"5px"}},"Description: ",e.food.details.description,r.a.createElement("br",null)),r.a.createElement("span",{style:{margin:"5px"}},"Calories: ",e.food.nutrition.calories,r.a.createElement("br",null)),!i&&r.a.createElement("span",null,r.a.createElement(d.a,{variant:"secondary",onClick:function(){return l(!0)}},"See nutrition"),r.a.createElement("br",null)),i&&r.a.createElement("span",null,"Food nutrition",r.a.createElement(N,{nutrition:e.food.nutrition}),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return l(!1)}},"Hide nutrition"),r.a.createElement("br",null)),r.a.createElement("span",null,"Serving size:",r.a.createElement(O.a,{type:"number",placeholder:100,style:{width:"80px",display:"inline-block",margin:"5px"},value:e.food.serving,onChange:function(t){return e.updateServingSize(e.food,t.target.value)}}),"g"),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"danger",onClick:function(){return e.removeFood(e.food._id?e.food._id:e.food.fdcId)}},"Remove"))}var T=[{value:"breakfast",label:"Breakfast"},{value:"lunch",label:"Lunch"},{value:"dinner",label:"Dinner"}];function R(e){var t,n,i,l=Object(a.useState)((null===(t=e.meal)||void 0===t?void 0:t.foods)?e.meal.foods:[]),u=Object(o.a)(l,2),c=u[0],s=u[1],m=Object(a.useState)((null===(n=e.meal)||void 0===n?void 0:n.name)?e.meal.name:""),f=Object(o.a)(m,2),p=f[0],v=f[1],E=Object(a.useState)((null===(i=e.meal)||void 0===i?void 0:i.nutrition)?e.meal.nutrition:{}),h=Object(o.a)(E,2),g=h[0],O=h[1],j=Object(a.useState)([]),x=Object(o.a)(j,2),S=x[0],w=x[1],R=function(e,t){var n=c.map((function(n){return(e._id?n._id===e._id:n.fdcId===e.fdcId)?(e.serving=parseInt(t),e.nutrition={calories:M(n.usdaNutrition.calories,t),protein:D(n.usdaNutrition.protein,t),carbs:D(n.usdaNutrition.carbs,t),fat:D(n.usdaNutrition.fat,t),sugar:D(n.usdaNutrition.sugar,t),fiber:D(n.usdaNutrition.fiber,t),sodium:M(n.usdaNutrition.sodium,t),calcium:M(n.usdaNutrition.calcium,t),iron:D(n.usdaNutrition.iron,t),cholesterol:M(n.usdaNutrition.cholesterol,t),potassium:M(n.usdaNutrition.potassium,t),vitaminA:D(n.usdaNutrition.vitaminA,t),vitaminC:D(n.usdaNutrition.vitaminC,t)},e):n}));s(n),function(){var e={calories:0,protein:0,carbs:0,fat:0,sugar:0,fiber:0,sodium:0,calcium:0,iron:0,cholesterol:0,potassium:0,vitaminA:0,vitaminC:0};c.forEach((function(t){e.calories+=t.nutrition.calories,e.protein+=t.nutrition.protein,e.carbs+=t.nutrition.carbs,e.fat+=t.nutrition.fat,e.sugar+=t.nutrition.sugar,e.fiber+=t.nutrition.fiber,e.sodium+=t.nutrition.sodium,e.calcium+=t.nutrition.calcium,e.iron+=t.nutrition.iron,e.cholesterol+=t.nutrition.cholesterol,e.potassium+=t.nutrition.potassium,e.vitaminA+=t.nutrition.vitaminA,e.vitaminC+=t.nutrition.vitaminC})),O(e)}()},D=function(e,t){return Math.round(e*t)/100},M=function(e,t){return Math.round(e/100*t)},F=function(e){var t=c.filter((function(t){return t.fdcId===e}))[0];s(c.filter((function(t){return t.fdcId!==e}))),w(S.filter((function(t){return t!==e})));var n=U(t,-1);O(n)},P=function(e){var t=c.filter((function(t){return t._id===e}))[0];s(c.filter((function(t){return t._id!==e})));var n=U(t,-1);O(n)},U=function(e,t){return{calories:_(g.calories,e.nutrition.calories,t),protein:_(g.protein,e.nutrition.protein,t),carbs:_(g.carbs,e.nutrition.carbs,t),fat:_(g.fat,e.nutrition.fat,t),sugar:_(g.sugar,e.nutrition.sugar,t),fiber:_(g.fiber,e.nutrition.fiber,t),sodium:_(g.sodium,e.nutrition.sodium,t),calcium:_(g.calcium,e.nutrition.calcium,t),iron:_(g.iron,e.nutrition.iron,t),cholesterol:_(g.cholesterol,e.nutrition.cholesterol,t),potassium:_(g.potassium,e.nutrition.potassium,t),vitaminA:_(g.vitaminA,e.nutrition.vitaminA,t),vitaminC:_(g.vitaminC,e.nutrition.vitaminC,t)}},_=function(e,t,n){return(e||0)+n*(t||0)};return r.a.createElement("div",{style:{margin:"50px"}},r.a.createElement("div",null,r.a.createElement("div",{style:{borderStyle:"solid",borderWidth:"1px",padding:"20px"}},r.a.createElement(y.a,{onSelect:v,value:p},r.a.createElement(y.a.Toggle,{style:{backgroundColor:"white",color:"black"}},p||"Meal"),r.a.createElement(y.a.Menu,null,T.map((function(e){return r.a.createElement(y.a.Item,{key:e.label,eventKey:e.label},e.label)})))),A(g)&&r.a.createElement("div",null,"Nutrition summary",r.a.createElement(N,{nutrition:g})),r.a.createElement("div",{style:{marginTop:"20px"}},"Foods"),r.a.createElement("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},c.map((function(t){return r.a.createElement(k,{key:t._id?t._id:t.fdcId,food:t,updateServingSize:R,removeFood:e.meal?P:F})}))),r.a.createElement(I,{selectFood:function(e,t){var n,a,r,i,l,o,u,c,d,m,f,p,v,E,h,y,g,j,x,S,I,A,N,k,T,R,D=null===t||void 0===t||null===(n=t.foodNutrients)||void 0===n||null===(a=n.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.ENERGY}))[0])||void 0===a?void 0:a.amount,M=null===t||void 0===t||null===(r=t.foodNutrients)||void 0===r||null===(i=r.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.PROTEIN}))[0])||void 0===i?void 0:i.amount,F=null===t||void 0===t||null===(l=t.foodNutrients)||void 0===l||null===(o=l.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.CARBOHYDRATE}))[0])||void 0===o?void 0:o.amount,P=null===t||void 0===t||null===(u=t.foodNutrients)||void 0===u||null===(c=u.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.FAT}))[0])||void 0===c?void 0:c.amount,_=null===t||void 0===t||null===(d=t.foodNutrients)||void 0===d||null===(m=d.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.SUGAR}))[0])||void 0===m?void 0:m.amount,L=null===t||void 0===t||null===(f=t.foodNutrients)||void 0===f||null===(p=f.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.FIBER}))[0])||void 0===p?void 0:p.amount,B=null===t||void 0===t||null===(v=t.foodNutrients)||void 0===v||null===(E=v.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.SODIUM}))[0])||void 0===E?void 0:E.amount,H=null===t||void 0===t||null===(h=t.foodNutrients)||void 0===h||null===(y=h.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.CALCIUM}))[0])||void 0===y?void 0:y.amount,Y=null===t||void 0===t||null===(g=t.foodNutrients)||void 0===g||null===(j=g.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.IRON}))[0])||void 0===j?void 0:j.amount,G=null===t||void 0===t||null===(x=t.foodNutrients)||void 0===x||null===(S=x.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.CHOLESTEROL}))[0])||void 0===S?void 0:S.amount,W=null===t||void 0===t||null===(I=t.foodNutrients)||void 0===I||null===(A=I.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.POTASSIUM}))[0])||void 0===A?void 0:A.amount,J=null===t||void 0===t||null===(N=t.foodNutrients)||void 0===N||null===(k=N.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.VITAMIN_A}))[0])||void 0===k?void 0:k.amount,z=null===t||void 0===t||null===(T=t.foodNutrients)||void 0===T||null===(R=T.filter((function(e){return(null===e||void 0===e?void 0:e.nutrient.id)===C.VITAMIN_C}))[0])||void 0===R?void 0:R.amount,V={brand:e.brandOwner,ingredients:e.ingredients,fdcId:e.fdcId,serving:100,nutrition:{calories:D||0,protein:M||0,carbs:F||0,fat:P||0,sugar:_||0,fiber:L||0,sodium:B||0,calcium:H||0,iron:Y||0,cholesterol:G||0,potassium:W||0,vitaminA:J||0,vitaminC:z||0},usdaNutrition:{calories:D||0,protein:M||0,carbs:F||0,fat:P||0,sugar:_||0,fiber:L||0,sodium:B||0,calcium:H||0,iron:Y||0,cholesterol:G||0,potassium:W||0,vitaminA:J||0,vitaminC:z||0},details:t};s((function(e){return[].concat(Object(b.a)(e),[V])})),w((function(t){return[].concat(Object(b.a)(t),[e.fdcId])}));var K=U(V,1);O(K)},showSelect:!0,fdcIds:S}),r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(d.a,{variant:"secondary",type:"button",onClick:e.cancel,style:{marginRight:"5px"}},"Cancel"),r.a.createElement(d.a,{variant:"primary",type:"submit",onClick:function(t){var n;t.preventDefault();var a=c.map((function(e){return e.name=e.name?e.name:e.details.description,e})),r={_id:null===(n=e.meal)||void 0===n?void 0:n._id,name:p,foods:a,nutrition:g};e.submit(r)}},!e.meal&&"Add Meal",e.meal&&"Update Meal")))))}var D=n(92),M=n(94);function F(e){var t,n,i=Object(a.useState)(!1),l=Object(o.a)(i,2),u=l[0],c=l[1];return r.a.createElement("span",null,e.food.name,r.a.createElement("br",null),r.a.createElement("span",null,e.food.group&&r.a.createElement("span",null,"group: ",e.food.group,r.a.createElement("br",null)),"serving: ",e.food.serving,r.a.createElement("br",null),"calories: ",null===(t=e.food)||void 0===t||null===(n=t.nutrition)||void 0===n?void 0:n.calories,r.a.createElement("br",null),!u&&r.a.createElement("span",null,r.a.createElement(d.a,{variant:"secondary",onClick:function(){return c(!0)}},"See nutrition"),r.a.createElement("br",null)),u&&A(e.food.nutrition)&&r.a.createElement("span",null,"Food nutrition",r.a.createElement(N,{nutrition:e.food.nutrition,height:"180px"}),r.a.createElement(d.a,{variant:"secondary",onClick:function(){return c(!1)}},"Hide nutrition"),r.a.createElement("br",null))))}function P(e){var t,n,a;return r.a.createElement(x.a,{style:{width:"24rem",margin:"0 auto"},className:"mb-2"},r.a.createElement(x.a.Header,null,r.a.createElement("span",null,e.meal.name),r.a.createElement("br",null),r.a.createElement(d.a,{variant:"link",size:"sm",onClick:function(){return e.updateMeal(e.meal)}},r.a.createElement(D.a,{icon:M.a,style:{color:"black"}})),r.a.createElement(d.a,{variant:"link",size:"sm",onClick:function(){return e.deleteMeal(e.meal._id)}},r.a.createElement(D.a,{icon:M.b,style:{color:"black"}}))),r.a.createElement(x.a.Body,null,r.a.createElement(x.a.Text,null,null===(t=e.meal)||void 0===t||null===(n=t.foods)||void 0===n?void 0:n.map((function(e,t){return r.a.createElement("span",{key:t},r.a.createElement(F,{food:e}))})))),r.a.createElement("div",null,"Meal nutrition",A(null===(a=e.meal)||void 0===a?void 0:a.nutrition)&&r.a.createElement(N,{nutrition:e.meal.nutrition})))}function U(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],l=n[1],u=Object(a.useState)(""),c=Object(o.a)(u,2),s=c[0],m=c[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(g.a,{onSubmit:function(t){t.preventDefault(),e.handleSubmit(i,s)}},r.a.createElement(g.a.Group,{controlId:"formBasicEmail"},r.a.createElement(g.a.Label,null,"Email address"),r.a.createElement(g.a.Control,{type:"email",placeholder:"Email",value:i,onChange:function(e){l(e.target.value)}})),r.a.createElement(g.a.Group,{controlId:"formBasicPassword"},r.a.createElement(g.a.Label,null,"Password"),r.a.createElement(g.a.Control,{type:"password",placeholder:"Password",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement(d.a,{variant:"primary",type:"submit"},"Submit"))))}var _=n(121),L=n(95);function B(){return localStorage.getItem("currentUser")}function H(e){var t=Object(E.f)(),n=Object(a.useState)("login"),i=Object(o.a)(n,2),l=i[0],u=i[1],d=Object(a.useState)(""),m=Object(o.a)(d,2),f=m[0],p=m[1],v=function(){var n=Object(s.a)(c.a.mark((function n(a,r,i){var l,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(z+"/"+i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:r})});case 2:return l=n.sent,n.next=5,l.text();case 5:o=n.sent,"login"===i&&302===l.status||"signup"===i&&201===l.status?(localStorage.setItem("currentUser",JSON.stringify(o)),e.setAuthenticated(!0),t.push("/days")):p("error with "+i+"\n"+o);case 7:case"end":return n.stop()}}),n)})));return function(e,t,a){return n.apply(this,arguments)}}();return r.a.createElement("div",{style:{width:"50%",height:"auto"}},r.a.createElement(_.a,{id:"signin-tabs",activeKey:l,onSelect:function(e){u(e),p("")}},r.a.createElement(L.a,{eventKey:"login",title:"Login"},r.a.createElement(U,{handleSubmit:function(e,t){v(e,t,"login")}})),r.a.createElement(L.a,{eventKey:"signup",title:"Sign Up"},r.a.createElement(U,{handleSubmit:function(e,t){v(e,t,"signup")}}))),f&&r.a.createElement("div",{style:{color:"red"}},"sign in unsuccessful :("))}function Y(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),i=n[0],l=n[1],u=Object(a.useState)(new Date),m=Object(o.a)(u,2),p=m[0],v=m[1],E=Object(a.useState)(!1),b=Object(o.a)(E,2),y=b[0],g=b[1],O=Object(a.useState)(""),j=Object(o.a)(O,2),x=j[0],S=j[1];Object(a.useEffect)((function(){C(p)}),[]);var C=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:n=e.sent,l(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"?user="+B(),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:if("000000000000000000000000"!==(r=e.sent)._id){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"/meals?user="+B(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:C(p),g(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"/meals/"+t._id+"?user="+B(),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:C(p),S("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getUTCDate(),e.next=3,fetch(z+"/days/"+n+"/meals/"+t+"?user="+B(),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:C(p);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){S(x?"":e)};return r.a.createElement("div",null,r.a.createElement(h,{setAuthenticated:e.setAuthenticated}),r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement(f.a,{selected:p,onChange:function(e){v(e),C(e),g(!1)}})),y&&r.a.createElement(R,{submit:I,cancel:function(){g(!1)}}),x&&r.a.createElement(R,{submit:k,cancel:function(){return S("")},meal:x}),!y&&!x&&r.a.createElement(d.a,{onClick:function(){g(!0)},style:{margin:"10px"}},"Add meal"),!y&&!x&&i&&r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},i.meals&&i.meals.map((function(e,t){return r.a.createElement(P,{key:t,meal:e,updateMeal:D,deleteMeal:T})}))),r.a.createElement("div",null,A(i.nutrition)&&r.a.createElement("span",null,"Daily nutrition summary",r.a.createElement(N,{nutrition:i.nutrition})))),!i&&r.a.createElement("div",null,"no data for this date"))}var G=n(61);n(199);function W(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],l=n[1];return r.a.createElement("div",null,r.a.createElement(h,{setAuthenticated:e.setAuthenticated}),i&&r.a.createElement("span",null,"selected food fdc ID: ",i),r.a.createElement(I,{selectFood:function(e){l(e.FdcId)}}))}function J(e){return r.a.createElement("div",{style:{margin:"3%"}},r.a.createElement("h3",null,"Refactored Spoon"),r.a.createElement("div",null,"an app to help you track what you eat and provide nutritional insights"),r.a.createElement("span",{style:{display:"flex",justifyContent:"center",margin:"5%"}},r.a.createElement(H,{setAuthenticated:e.setAuthenticated})))}var z="https://shielded-earth-02834.herokuapp.com";var V=function(){var e=Object(a.useState)(B()),t=Object(o.a)(e,2),n=t[0],i=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(G.a,{basename:"/refactored-spoon"},r.a.createElement(E.b,{exact:!0,path:"/",render:function(){return r.a.createElement(J,{setAuthenticated:i})}}),!n&&r.a.createElement("span",null,r.a.createElement(E.a,{to:"/"})),n&&r.a.createElement("span",null,r.a.createElement(E.b,{path:"/days",render:function(){return r.a.createElement(Y,{setAuthenticated:i})}}),r.a.createElement(E.b,{path:"/foodsearch",render:function(){return r.a.createElement(W,{setAuthenticated:i})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.07707339.chunk.js.map